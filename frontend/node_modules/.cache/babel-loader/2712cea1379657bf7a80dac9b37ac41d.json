{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Natalio-PC\\\\Desktop\\\\Guuru\\\\frontend\\\\src\\\\components\\\\auth\\\\Register.jsx\";\nimport React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserContext from \"../../context/userContext\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nimport './Login.css';\nimport DrawerLayout from '../layout/Drawer/DrawerLayout';\n\nfunction Register() {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [passwordCheck, setPasswordCheck] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [error, setError] = useState();\n  const saldo = 0;\n  const {\n    setUserData\n  } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      const newUser = {\n        email,\n        password,\n        passwordCheck,\n        displayName,\n        saldo\n      };\n      await axios.post(\"http://localhost:5000/users/register\", newUser);\n      const loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\n        email,\n        password\n      });\n      setUserData({\n        token: loginResponse.data.token,\n        user: loginResponse.data.user\n      });\n      localStorage.setItem(\"auth-token\", loginResponse.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, \"Register\"), error && /*#__PURE__*/React.createElement(ErrorNotice, {\n    message: error,\n    clearError: () => setError(undefined),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submit,\n    className: \"form-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, \"Nombre: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"dsplay-name\",\n    onChange: e => setDisplayName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Password: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"Repetir Password: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onChange: e => setPasswordCheck(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Register\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }))));\n}\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/Natalio-PC/Desktop/Guuru/frontend/src/components/auth/Register.jsx"],"names":["React","useState","useContext","useHistory","axios","UserContext","ErrorNotice","DrawerLayout","Register","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","displayName","setDisplayName","error","setError","saldo","setUserData","history","submit","e","preventDefault","newUser","post","loginResponse","token","data","user","localStorage","setItem","push","err","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\r\nimport './Login.css'\r\nimport DrawerLayout from '../layout/Drawer/DrawerLayout'\r\n\r\nfunction Register () {\r\n\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [passwordCheck, setPasswordCheck] = useState();\r\n    const [displayName, setDisplayName] = useState();\r\n    const [error, setError] = useState();\r\n    const saldo = 0;\r\n\r\n    const { setUserData } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try{\r\n            const newUser = {email, password, passwordCheck, displayName, saldo};\r\n            await axios.post(\"http://localhost:5000/users/register\", newUser);\r\n            const loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\r\n                email, password\r\n            });\r\n            setUserData({\r\n                token: loginResponse.data.token,\r\n                user: loginResponse.data.user\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n            history.push(\"/\");\r\n        } catch(err) {\r\n            err.response.data.msg && setError(err.response.data.msg)\r\n        }\r\n        \r\n    };\r\n   \r\n    return ( \r\n\r\n\r\n        <div className=\"register\">\r\n            <h2>Register</h2>\r\n            {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n            <div className='box-form'>\r\n            <form onSubmit={submit} className='form-login'>\r\n                <label>Nombre: </label>\r\n                <input type=\"text\" id=\"dsplay-name\" onChange={e => setDisplayName(e.target.value)}/>\r\n                <label>Email: </label>\r\n                <input type=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)}/>\r\n                <label>Password: </label>\r\n                <input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)}/>\r\n                <label>Repetir Password: </label>\r\n                <input type=\"password\" onChange={e => setPasswordCheck(e.target.value)}/>\r\n                \r\n                <input type=\"submit\" value=\"Register\" className=\"btn btn-primary\" />\r\n            </form>\r\n            </div>\r\n        </div>\r\n        );\r\n}\r\n \r\nexport default Register;"]},"metadata":{},"sourceType":"module"}