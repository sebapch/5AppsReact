{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import Axios from'axios';import{Grid,Input,Button}from'@mui/material';import{useParams,Link}from'react-router-dom';import{VaultContext}from\"../../../context/vaultContext\";var EditVaultData=function EditVaultData(){var _vault$vaults;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),vault=_useState2[0],setVault=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),timeTo=_useState4[0],setTimeTo=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),endDays=_useState6[0],setEndDays=_useState6[1];var _useParams=useParams(),id=_useParams.id,vaultid=_useParams.vaultid;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),usdt=_useState8[0],setUsdt=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),btc=_useState10[0],setBtc=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),eth=_useState12[0],setEth=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),ceuro=_useState14[0],setCeuro=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),ada=_useState16[0],setAda=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),bnb=_useState18[0],setBnb=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),cake=_useState20[0],setCake=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),land=_useState22[0],setLand=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),bsw=_useState24[0],setBsw=_useState24[1];var coins=[{coin:'USDT',quantity:usdt},{coin:'BTC',quantity:btc},{coin:'ETH',quantity:eth},{coin:'cEuro',quantity:ceuro},{coin:'ADA',quantity:ada},{coin:'BNB',quantity:bnb},{coin:'CAKE',quantity:cake},{coin:'LAND',quantity:land},{coin:'BSW',quantity:bsw}];var saveCoins=function saveCoins(){Axios.post(\"/users/api/vaults/\".concat(id,\"/\").concat(vaultid),{coins:coins}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});};var handleChange=function handleChange(newQuantity,index){console.log(index,newQuantity);switch(index){case 0:setUsdt(newQuantity);break;case 1:setBtc(newQuantity);break;case 2:setEth(newQuantity);break;case 3:setCeuro(newQuantity);break;case 4:setAda(newQuantity);break;case 5:setBnb(newQuantity);break;case 6:setCake(newQuantity);break;case 7:setLand(newQuantity);break;case 8:setBsw(newQuantity);break;default:break;}};function traerVault(){return _traerVault.apply(this,arguments);}function _traerVault(){_traerVault=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"/users/api/vaults/\".concat(id,\"/\").concat(vaultid)).then(function(res){setVault(res.data);res.data.vaults.map(function(vault){if(vault._id===vaultid){console.log(vault);console.log(vault.timelock);setTimeTo(vault.timelock);vault.coins.map(function(vault,index){switch(index){case 0:setUsdt(vault.quantity);break;case 1:setBtc(vault.quantity);break;case 2:setEth(vault.quantity);break;case 3:setCeuro(vault.quantity);break;case 4:setAda(vault.quantity);break;case 5:setBnb(vault.quantity);break;case 6:setCake(vault.quantity);break;case 7:setLand(vault.quantity);break;case 8:setBsw(vault.quantity);break;default:break;}});}});}).finally(function(){console.log('finally');}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _traerVault.apply(this,arguments);}function toTimestamp(strDate){var datum=Date.parse(strDate);return datum/1000;}function setEnd(){var today=new Date();var priorDate=new Date(new Date().setDate(today.getDate()+parseInt(timeTo)));console.log(timeTo);console.log(priorDate);setEndDays(toTimestamp(priorDate));}useEffect(function(){traerVault();},[]);useEffect(function(){setEnd();},[timeTo]);function activateVault(_x){return _activateVault.apply(this,arguments);}function _activateVault(){_activateVault=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(vault){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.post(\"/users/api/activate/\".concat(id,\"/\").concat(vault),{userId:id,vaultId:vault,endDate:endDays}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _activateVault.apply(this,arguments);}console.log(endDays);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true},(_vault$vaults=vault.vaults)===null||_vault$vaults===void 0?void 0:_vault$vaults.map(function(vault){var _vault$coins;return vault._id===vaultid?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Vault ID : \",vault._id),/*#__PURE__*/React.createElement(\"label\",null,\"Activada: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.activated}),/*#__PURE__*/React.createElement(\"label\",null,\"Auto Renovar: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.autoRenew}),/*#__PURE__*/React.createElement(\"label\",null,\"Valor: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.funds}),/*#__PURE__*/React.createElement(\"label\",null,\"Valor: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.funds}),/*#__PURE__*/React.createElement(\"label\",null,\"Stable: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.stable}),/*#__PURE__*/React.createElement(\"label\",null,\"Timelock: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:vault.timelock}),/*#__PURE__*/React.createElement(\"label\",null,\"Creada el: \"),/*#__PURE__*/React.createElement(\"label\",null,vault.createdAt),/*#__PURE__*/React.createElement(\"label\",null,\"Ultima Modificacion: \"),/*#__PURE__*/React.createElement(\"label\",null,vault.updatedAt),!vault.activated?/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:function onClick(){return activateVault(vault===null||vault===void 0?void 0:vault._id);}},\"activar\"):null,/*#__PURE__*/React.createElement(\"label\",null,\"Coins: \"),/*#__PURE__*/React.createElement(Grid,{className:\"d-flex  flex-wrap\"},(_vault$coins=vault.coins)===null||_vault$coins===void 0?void 0:_vault$coins.map(function(coin,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{item:true,md:4,className:\"d-flex flex-column align-items-center\"},/*#__PURE__*/React.createElement(\"label\",null,coin.coin),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",key:index,defaultValue:coin.quantity,className:\"w-50\",onChange:function onChange(e){return handleChange(e.target.value,index);}})));}))),/*#__PURE__*/React.createElement(\"button\",{onClick:saveCoins},\"GUARDAR Monedas\")):null;})));};export default EditVaultData;","map":{"version":3,"sources":["C:/Users/snmed/Desktop/guuru/guuru2/Guuru_main/frontend/src/components/pages/Private/EditVaultData.jsx"],"names":["React","useState","useEffect","useContext","Axios","Grid","Input","Button","useParams","Link","VaultContext","EditVaultData","vault","setVault","timeTo","setTimeTo","endDays","setEndDays","id","vaultid","usdt","setUsdt","btc","setBtc","eth","setEth","ceuro","setCeuro","ada","setAda","bnb","setBnb","cake","setCake","land","setLand","bsw","setBsw","coins","coin","quantity","saveCoins","post","then","res","console","log","catch","err","handleChange","newQuantity","index","traerVault","get","data","vaults","map","_id","timelock","finally","toTimestamp","strDate","datum","Date","parse","setEnd","today","priorDate","setDate","getDate","parseInt","activateVault","userId","vaultId","endDate","activated","autoRenew","funds","stable","createdAt","updatedAt","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport Axios from 'axios';\r\nimport {Grid, Input, Button } from '@mui/material';\r\nimport { useParams, Link } from 'react-router-dom'\r\nimport { VaultContext } from \"../../../context/vaultContext\";\r\n\r\n\r\nconst EditVaultData = () => {\r\n    const [vault, setVault] = useState('');\r\n    const [timeTo, setTimeTo] = useState();\r\n    const [endDays, setEndDays] = useState('');\r\n    const { id, vaultid } = useParams();\r\n    const [usdt, setUsdt ] = useState(0);\r\n    const [btc, setBtc ] = useState(0);\r\n    const [eth, setEth ] = useState(0);\r\n    const [ceuro, setCeuro ] = useState(0);\r\n    const [ada, setAda ] = useState(0);\r\n    const [bnb, setBnb ] = useState(0);\r\n    const [cake, setCake ] = useState(0);\r\n    const [land, setLand ] = useState(0);\r\n    const [bsw, setBsw ] = useState(0);\r\n    let coins = [{coin: 'USDT', quantity: usdt}, {coin: 'BTC', quantity: btc}, {coin: 'ETH', quantity: eth}, {coin: 'cEuro', quantity: ceuro}, {coin: 'ADA', quantity: ada}, {coin: 'BNB', quantity: bnb}, {coin: 'CAKE', quantity: cake}, {coin: 'LAND', quantity: land}, {coin: 'BSW', quantity: bsw}];\r\n\r\n    const saveCoins = () => {\r\n        Axios.post(`/users/api/vaults/${id}/${vaultid}`, {\r\n            coins\r\n        })\r\n        .then(res => {\r\n            console.log(res);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    const handleChange = (newQuantity, index) => {\r\n        console.log(index, newQuantity);\r\n        switch(index){\r\n            case 0:\r\n                setUsdt(newQuantity);\r\n                break;\r\n            case 1:\r\n                setBtc(newQuantity);\r\n                break;\r\n            case 2:\r\n                setEth(newQuantity);\r\n                break;\r\n            case 3:\r\n                setCeuro(newQuantity);\r\n                break;\r\n            case 4:\r\n                setAda(newQuantity);\r\n                break;\r\n            case 5:\r\n                setBnb(newQuantity);\r\n                break;\r\n            case 6:\r\n                setCake(newQuantity);\r\n                break;\r\n            case 7:\r\n                setLand(newQuantity);\r\n                break;\r\n            case 8:\r\n                setBsw(newQuantity);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    async function traerVault() {\r\n        await Axios.get(`/users/api/vaults/${id}/${vaultid}`)\r\n            .then(res => {\r\n                setVault(res.data)\r\n               \r\n                res.data.vaults.map(vault => {\r\n                    if(vault._id === vaultid){\r\n                        console.log(vault)\r\n                        console.log(vault.timelock)\r\n                        setTimeTo(vault.timelock)\r\n                        vault.coins.map((vault, index) => {\r\n                            switch(index){\r\n                                case 0:\r\n                                    setUsdt(vault.quantity);\r\n                                    break;\r\n                                case 1:\r\n                                    setBtc(vault.quantity);\r\n                                    break;\r\n                                case 2:\r\n                                    setEth(vault.quantity);\r\n                                    break;\r\n                                case 3:\r\n                                    setCeuro(vault.quantity);\r\n                                    break;\r\n                                case 4:\r\n                                    setAda(vault.quantity);\r\n                                    break;\r\n                                case 5:\r\n                                    setBnb(vault.quantity);\r\n                                    break;\r\n                                case 6:\r\n                                    setCake(vault.quantity);\r\n                                    break;\r\n                                case 7:\r\n                                    setLand(vault.quantity);\r\n                                    break;\r\n                                case 8:\r\n                                    setBsw(vault.quantity);\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n            .finally(() => {\r\n                console.log('finally');\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n            \r\n    }\r\n\r\n\r\n\r\n    function toTimestamp(strDate){\r\n        var datum = Date.parse(strDate);\r\n        return datum/1000;\r\n     }\r\n\r\n     function setEnd(){\r\n        var today = new Date();\r\n        var priorDate = new Date(new Date().setDate(today.getDate() + parseInt(timeTo)));\r\n        console.log(timeTo)\r\n        console.log(priorDate)\r\n        setEndDays(toTimestamp(priorDate));\r\n     }\r\n\r\n\r\n    useEffect(() => {\r\n        traerVault();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setEnd();\r\n    }, [timeTo]); \r\n\r\n    async function activateVault(vault) {\r\n        \r\n        await Axios.post(`/users/api/activate/${id}/${vault}`, {\r\n            userId: id,\r\n            vaultId: vault,\r\n            endDate: endDays\r\n          })\r\n            .then(res => {\r\n              console.log(res)\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n            })\r\n            \r\n        }\r\n\r\n        console.log(endDays);\r\n    return (\r\n        <>\r\n            <Grid container >\r\n                {vault.vaults?.map((vault) => (\r\n                    (vault._id === vaultid) ? (\r\n                        <>\r\n                        <Grid className='d-flex flex-column'>\r\n                            <h1>Vault ID : {vault._id}</h1>\r\n                            <label>Activada: </label>\r\n                            <input type=\"text\" defaultValue={vault.activated} />                            \r\n                            <label>Auto Renovar: </label>\r\n                            <input type=\"text\" defaultValue={vault.autoRenew} />                           \r\n                            <label>Valor: </label>\r\n                            <input type=\"text\" defaultValue={vault.funds} />\r\n                            <label>Valor: </label>\r\n                            <input type=\"text\" defaultValue={vault.funds} />\r\n                            <label>Stable: </label>\r\n                            <input type=\"text\" defaultValue={vault.stable} />\r\n                            <label>Timelock: </label>\r\n                            <input type=\"text\" defaultValue={vault.timelock} />\r\n                            <label>Creada el: </label>\r\n                            <label>{vault.createdAt}</label>\r\n                            <label>Ultima Modificacion: </label>\r\n                            <label>{vault.updatedAt}</label>\r\n                            {(!vault.activated) ? <Button variant=\"contained\" onClick={() => activateVault(vault?._id)}>activar</Button> : null}\r\n\r\n                            <label>Coins: </label>\r\n                            <Grid className=\"d-flex  flex-wrap\">\r\n                            {vault.coins?.map((coin, index) => (\r\n                                <>\r\n                                <Grid item md={4} className='d-flex flex-column align-items-center'>\r\n                                    <label>{coin.coin}</label>\r\n                                    \r\n                                    \r\n                                    <input type=\"text\" key={index} defaultValue={coin.quantity}  className='w-50' onChange={(e) => handleChange(e.target.value, index)} />\r\n                                    </Grid>\r\n                                </>\r\n                            ))}\r\n                            </Grid>\r\n                        </Grid>\r\n                            \r\n                            <button onClick={saveCoins}>GUARDAR Monedas</button>\r\n                        </>\r\n\r\n                    )\r\n                        : null\r\n                ))}\r\n\r\n\r\n            </Grid>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default EditVaultData"]},"metadata":{},"sourceType":"module"}