{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from\"react-router-dom\";import axios from\"axios\";import UserContext from\"../../context/userContext\";import ErrorNotice from\"../misc/ErrorNotice\";import'./Login.css';function Register(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),passwordCheck=_useState6[0],setPasswordCheck=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),displayName=_useState8[0],setDisplayName=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var saldo=0;var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,loginResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;newUser={email:email,password:password,passwordCheck:passwordCheck,displayName:displayName,saldo:saldo};_context.next=5;return axios.post(\"/users/register\",newUser);case 5:_context.next=7;return axios.post(\"/users/login\",{email:email,password:password});case 7:loginResponse=_context.sent;setUserData({token:loginResponse.data.token,user:loginResponse.data.user});localStorage.setItem(\"auth-token\",loginResponse.data.token);history.push(\"/\");_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"register\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Register\"),error&&/*#__PURE__*/React.createElement(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"box-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submit,className:\"form-login\"},/*#__PURE__*/React.createElement(\"label\",null,\"Nombre: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"dsplay-name\",onChange:function onChange(e){return setDisplayName(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Repetir Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:function onChange(e){return setPasswordCheck(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Register\",className:\"btn btn-primary\"}))));}export default Register;","map":{"version":3,"sources":["C:/Users/snmed/Desktop/guuru/guuru2/Guuru_main/frontend/src/components/auth/Register.jsx"],"names":["React","useState","useContext","useHistory","axios","UserContext","ErrorNotice","Register","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","displayName","setDisplayName","error","setError","saldo","setUserData","history","submit","e","preventDefault","newUser","post","loginResponse","token","data","user","localStorage","setItem","push","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport ErrorNotice from \"../misc/ErrorNotice\";\r\nimport './Login.css'\r\n\r\nfunction Register () {\r\n\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [passwordCheck, setPasswordCheck] = useState();\r\n    const [displayName, setDisplayName] = useState();\r\n    const [error, setError] = useState();\r\n    const saldo = 0;\r\n\r\n    const { setUserData } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try{\r\n            const newUser = {email, password, passwordCheck, displayName, saldo};\r\n            await axios.post(\"/users/register\", newUser);\r\n            const loginResponse = await axios.post(\"/users/login\", {\r\n                email, password\r\n            });\r\n            setUserData({\r\n                token: loginResponse.data.token,\r\n                user: loginResponse.data.user\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n            history.push(\"/\");\r\n        } catch(err) {\r\n            err.response.data.msg && setError(err.response.data.msg)\r\n        }\r\n        \r\n    };\r\n   \r\n    return ( \r\n\r\n\r\n        <div className=\"register\">\r\n            <h2>Register</h2>\r\n            {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n            <div className='box-form'>\r\n            <form onSubmit={submit} className='form-login'>\r\n                <label>Nombre: </label>\r\n                <input type=\"text\" id=\"dsplay-name\" onChange={e => setDisplayName(e.target.value)}/>\r\n                <label>Email: </label>\r\n                <input type=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)}/>\r\n                <label>Password: </label>\r\n                <input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)}/>\r\n                <label>Repetir Password: </label>\r\n                <input type=\"password\" onChange={e => setPasswordCheck(e.target.value)}/>\r\n                \r\n                <input type=\"submit\" value=\"Register\" className=\"btn btn-primary\" />\r\n            </form>\r\n            </div>\r\n        </div>\r\n        );\r\n}\r\n \r\nexport default Register;"]},"metadata":{},"sourceType":"module"}