{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Natalio-PC\\\\Desktop\\\\Guuru\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Natalio-PC\\\\Desktop\\\\Guuru\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Natalio-PC\\\\Desktop\\\\Guuru\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from\"react-router-dom\";import axios from\"axios\";import UserContext from\"../../context/userContext\";import ErrorNotice from\"../../components/misc/ErrorNotice\";import'./Login.css';import DrawerLayout from'../layout/Drawer/DrawerLayout';function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var loginUser,loginResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;loginUser={email:email,password:password};_context.next=5;return axios.post(\"http://localhost:5000/users/login\",loginUser);case 5:loginResponse=_context.sent;setUserData({token:loginResponse.data.token,user:loginResponse.data.user});localStorage.setItem(\"auth-token\",loginResponse.data.token);localStorage.setItem(\"isAuthenticated\",\"true\");history.push(\"/\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(DrawerLayout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),error&&/*#__PURE__*/React.createElement(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"box-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submit,className:\"form-login\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary\"})))));}export default Login;","map":{"version":3,"sources":["C:/Users/Natalio-PC/Desktop/Guuru/frontend/src/components/auth/Login.jsx"],"names":["React","useState","useContext","useHistory","axios","UserContext","ErrorNotice","DrawerLayout","Login","email","setEmail","password","setPassword","error","setError","setUserData","history","submit","e","preventDefault","loginUser","post","loginResponse","token","data","user","localStorage","setItem","push","response","msg","undefined","target","value"],"mappings":"8fAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CAEA,QAASC,CAAAA,KAAT,EAAkB,eACYP,QAAQ,EADpB,wCACPQ,KADO,eACAC,QADA,8BAEkBT,QAAQ,EAF1B,yCAEPU,QAFO,eAEGC,WAFH,8BAGYX,QAAQ,EAHpB,yCAGPY,KAHO,eAGAC,QAHA,+BAKUZ,UAAU,CAACG,WAAD,CALpB,CAKNU,WALM,aAKNA,WALM,CAMd,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAEA,GAAMc,CAAAA,MAAM,0FAAG,iBAAOC,CAAP,8IACXA,CAAC,CAACC,cAAF,GADW,gBAGDC,SAHC,CAGW,CAACX,KAAK,CAALA,KAAD,CAAQE,QAAQ,CAARA,QAAR,CAHX,uBAIqBP,CAAAA,KAAK,CAACiB,IAAN,CAAW,mCAAX,CAAgDD,SAAhD,CAJrB,QAIDE,aAJC,eAKPP,WAAW,CAAC,CACRQ,KAAK,CAAED,aAAa,CAACE,IAAd,CAAmBD,KADlB,CAERE,IAAI,CAAEH,aAAa,CAACE,IAAd,CAAmBC,IAFjB,CAAD,CAAX,CAIAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCL,aAAa,CAACE,IAAd,CAAmBD,KAAtD,EACAG,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAwC,MAAxC,EACAX,OAAO,CAACY,IAAR,CAAa,GAAb,EAXO,iFAaP,YAAIC,QAAJ,CAAaL,IAAb,CAAkBM,GAAlB,EAAyBhB,QAAQ,CAAC,YAAIe,QAAJ,CAAaL,IAAb,CAAkBM,GAAnB,CAAjC,CAbO,qEAAH,kBAANb,CAAAA,MAAM,4CAAZ,CAkBA,mBACI,oBAAC,YAAD,mBACA,2BAAK,SAAS,CAAC,OAAf,eACI,sCADJ,CAEKJ,KAAK,eAAI,oBAAC,WAAD,EAAa,OAAO,CAAEA,KAAtB,CAA6B,UAAU,CAAE,4BAAMC,CAAAA,QAAQ,CAACiB,SAAD,CAAd,EAAzC,EAFd,cAGI,2BAAK,SAAS,CAAC,UAAf,eACA,4BAAM,QAAQ,CAAEd,MAAhB,CAAwB,SAAS,CAAC,YAAlC,eACI,2CADJ,cAEI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,QAAQ,CAAE,kBAAAC,CAAC,QAAIR,CAAAA,QAAQ,CAACQ,CAAC,CAACc,MAAF,CAASC,KAAV,CAAZ,EAA1C,EAFJ,cAGI,8CAHJ,cAII,6BAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,UAA1B,CAAqC,QAAQ,CAAE,kBAAAf,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAAhD,EAJJ,cAKI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,OAA3B,CAAmC,SAAS,CAAC,iBAA7C,EALJ,CADA,CAHJ,CADA,CADJ,CAiBH,CAED,cAAezB,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\r\nimport './Login.css';\r\nimport DrawerLayout from '../layout/Drawer/DrawerLayout';\r\n\r\nfunction Login () {\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n\r\n    const { setUserData } = useContext(UserContext);\r\n    const history = useHistory();\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n        try{\r\n            const loginUser = {email, password};\r\n            const loginResponse = await axios.post(\"http://localhost:5000/users/login\", loginUser);\r\n            setUserData({\r\n                token: loginResponse.data.token,\r\n                user: loginResponse.data.user\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n            localStorage.setItem(\"isAuthenticated\", \"true\");\r\n            history.push(\"/\");\r\n        } catch(err) {\r\n            err.response.data.msg && setError(err.response.data.msg)\r\n        }\r\n        \r\n    };\r\n    \r\n    return (\r\n        <DrawerLayout>\r\n        <div className=\"login\">\r\n            <h2>Login</h2>\r\n            {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n            <div className='box-form'>\r\n            <form onSubmit={submit} className='form-login'>\r\n                <label>Email: </label>\r\n                <input type=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)}/>\r\n                <label>Password: </label>\r\n                <input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)}/>\r\n                <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\r\n            </form>\r\n            </div>\r\n        </div>\r\n        </DrawerLayout>\r\n    );\r\n}\r\n \r\nexport default Login;"]},"metadata":{},"sourceType":"module"}