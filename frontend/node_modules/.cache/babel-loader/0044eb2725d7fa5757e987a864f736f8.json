{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import UserContext from\"../../../context/userContext\";var VaultsSum=function VaultsSum(){var _userData$user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cryptos=_useState2[0],setCryptos=_useState2[1];var _useContext=useContext(UserContext),userData=_useContext.userData,setUserData=_useContext.setUserData;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),sumVaults=_useState4[0],setSumVaults=_useState4[1];var total=0;var uservaults=(_userData$user=userData.user)===null||_userData$user===void 0?void 0:_userData$user.vaults;var getSumOfFundsInUSD=function getSumOfFundsInUSD(){axios.get(\"https://min-api.cryptocompare.com/data/pricemulti?fsyms=BTC,ETH,ADA,BNB,Cake,LAND,BSW,&tsyms=USD\").then(function(res){var cryptos=res.data;setCryptos(cryptos);});};useEffect(function(){getSumOfFundsInUSD();getSumOffFunds();},[uservaults]);var getSumOffFunds=function getSumOffFunds(){var totalF=0;if(uservaults){uservaults.map(function(vault){console.log(vault.funds);vault.coins.map(function(coin){if(coin.coin!=='USDT'&&coin.coin!=='cEuro'){var _cryptos$coin$coin,_cryptos$coin$coin2;console.log((_cryptos$coin$coin=cryptos[coin.coin])===null||_cryptos$coin$coin===void 0?void 0:_cryptos$coin$coin.USD);console.log(total);totalF+=((_cryptos$coin$coin2=cryptos[coin.coin])===null||_cryptos$coin$coin2===void 0?void 0:_cryptos$coin$coin2.USD)*coin.quantity;setSumVaults(totalF);}else{totalF+=coin.quantity;setSumVaults(totalF);}});});}};console.log(cryptos);console.log(userData);console.log(sumVaults);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,sumVaults.toFixed(2)));};export default VaultsSum;","map":{"version":3,"sources":["C:/Users/snmed/Desktop/guuru/guuru2/Guuru_main/frontend/src/components/pages/Vaults/VaultsSum.jsx"],"names":["React","useState","useEffect","useContext","axios","UserContext","VaultsSum","cryptos","setCryptos","userData","setUserData","sumVaults","setSumVaults","total","uservaults","user","vaults","getSumOfFundsInUSD","get","then","res","data","getSumOffFunds","totalF","map","vault","console","log","funds","coins","coin","USD","quantity","toFixed"],"mappings":"0LAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,kCACQL,QAAQ,CAAC,EAAD,CADhB,wCACfM,OADe,eACNC,UADM,+BAEYL,UAAU,CAACE,WAAD,CAFtB,CAEdI,QAFc,aAEdA,QAFc,CAEJC,WAFI,aAEJA,WAFI,gBAGYT,QAAQ,CAAC,CAAD,CAHpB,yCAGfU,SAHe,eAGJC,YAHI,eAIpB,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAMC,CAAAA,UAAU,iBAAGL,QAAQ,CAACM,IAAZ,yCAAG,eAAeC,MAAlC,CAGF,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/Bb,KAAK,CACFc,GADH,CAEI,kGAFJ,EAIGC,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,GAAMb,CAAAA,OAAO,CAAGa,GAAG,CAACC,IAApB,CACAb,UAAU,CAACD,OAAD,CAAV,CACD,CAPH,EAQD,CATD,CAUAL,SAAS,CAAC,UAAM,CACde,kBAAkB,GAClBK,cAAc,GACf,CAHQ,CAGN,CAACR,UAAD,CAHM,CAAT,CAKA,GAAMQ,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,GAAIC,CAAAA,MAAM,CAAG,CAAb,CACA,GAAIT,UAAJ,CAAgB,CACdA,UAAU,CAACU,GAAX,CAAe,SAAAC,KAAK,CAAI,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,KAAlB,EACAH,KAAK,CAACI,KAAN,CAAYL,GAAZ,CAAgB,SAAAM,IAAI,CAAI,CAEtB,GAAIA,IAAI,CAACA,IAAL,GAAc,MAAd,EAAwBA,IAAI,CAACA,IAAL,GAAc,OAA1C,CAAmD,4CACjDJ,OAAO,CAACC,GAAR,qBAAYpB,OAAO,CAACuB,IAAI,CAACA,IAAN,CAAnB,6CAAY,mBAAoBC,GAAhC,EAEAL,OAAO,CAACC,GAAR,CAAYd,KAAZ,EACAU,MAAM,EAAK,sBAAAhB,OAAO,CAACuB,IAAI,CAACA,IAAN,CAAP,kEAAoBC,GAApB,EAA0BD,IAAI,CAACE,QAA1C,CACApB,YAAY,CAACW,MAAD,CAAZ,CACD,CAND,IAOK,CACHA,MAAM,EAAIO,IAAI,CAACE,QAAf,CACApB,YAAY,CAACW,MAAD,CAAZ,CACD,CACF,CAbD,EAcD,CAhBD,EAkBH,CAAC,CArBF,CAyBAG,OAAO,CAACC,GAAR,CAAYpB,OAAZ,EACAmB,OAAO,CAACC,GAAR,CAAYlB,QAAZ,EACAiB,OAAO,CAACC,GAAR,CAAYhB,SAAZ,EACA,mBACE,qDACE,8BAAKA,SAAS,CAACsB,OAAV,CAAkB,CAAlB,CAAL,CADF,CADF,CAKD,CAxDD,CA0DA,cAAe3B,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../../context/userContext\";\r\n\r\nconst VaultsSum = () => {\r\n  const [cryptos, setCryptos] = useState([]);\r\n  const { userData, setUserData } = useContext(UserContext);\r\n  const [sumVaults, setSumVaults] = useState(0);\r\n    let total = 0;\r\n    const uservaults = userData.user?.vaults\r\n\r\n\r\n  const getSumOfFundsInUSD = () => {\r\n    axios\r\n      .get(\r\n        \"https://min-api.cryptocompare.com/data/pricemulti?fsyms=BTC,ETH,ADA,BNB,Cake,LAND,BSW,&tsyms=USD\"\r\n      )\r\n      .then((res) => {\r\n        const cryptos = res.data;\r\n        setCryptos(cryptos);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    getSumOfFundsInUSD();\r\n    getSumOffFunds();\r\n  }, [uservaults]);\r\n\r\n  const getSumOffFunds = () => {\r\n    let totalF = 0;\r\n    if (uservaults) {\r\n      uservaults.map(vault => {\r\n        console.log(vault.funds)\r\n        vault.coins.map(coin => {\r\n          \r\n          if (coin.coin !== 'USDT' && coin.coin !== 'cEuro') {\r\n            console.log(cryptos[coin.coin]?.USD)\r\n            \r\n            console.log(total)\r\n            totalF +=  cryptos[coin.coin]?.USD * coin.quantity\r\n            setSumVaults(totalF);\r\n          }\r\n          else {\r\n            totalF += coin.quantity\r\n            setSumVaults(totalF);\r\n          }\r\n        })\r\n      }\r\n      )\r\n  }}\r\n\r\n\r\n\r\n  console.log(cryptos);\r\n  console.log(userData);\r\n  console.log(sumVaults);\r\n  return (\r\n    <>\r\n      <h1>{sumVaults.toFixed(2)}</h1>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VaultsSum;\r\n"]},"metadata":{},"sourceType":"module"}