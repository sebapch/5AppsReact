{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\snmed\\\\Desktop\\\\guuru\\\\guuru2\\\\Guuru_main\\\\frontend\\\\src\\\\components\\\\pages\\\\Private\\\\EditData.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { VaultContext } from \"../../../context/vaultContext\";\nimport Axios from 'axios';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Button from '@mui/material/Button';\n\nconst EditData = () => {\n  const {\n    id\n  } = useParams();\n  const [user, setUser] = useState([]);\n  const [saldo, setSaldo] = useState();\n  const {\n    endDate,\n    setEndDate\n  } = useContext(VaultContext);\n  var today = new Date();\n  var final = new Date(new Date().setDate(today.getDate() + 30));\n  console.log(final.toString());\n\n  function traerUser(user) {\n    Axios.get(`/users/api/edit/${id}`).then(res => {\n      setUser(user => res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  useEffect(() => {\n    traerUser();\n    setEndDate(final.toString());\n  }, []);\n\n  const saveUser = () => {\n    Axios.post(`/users/api/edit/${id}`, {\n      saldo: saldo,\n      userId: user._id\n    }).then(res => {\n      console.log(res);\n      console.log(saldo);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const activateVault = (vault, final) => {\n    Axios.post(`/users/api/activate/${id}/${vault}`, {\n      userId: user._id,\n      vaultId: vault,\n      endDate: final\n    }).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    }); //window.location.reload();\n  };\n\n  console.log(user);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, \"Editar usuario\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Nombre del usuario: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Saldo disponible: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: user.saldo,\n    onChange: e => setSaldo(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"ID del usuario: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: user._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: saveUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"Editar datos\"), /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    sx: {\n      minWidth: 650\n    },\n    \"aria-label\": \"simple table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, \"Vault\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"Timelock\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, \"Invertido\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Auto Renovar\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, \"Estado\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, (user === null || user === void 0 ? void 0 : user.vaults) && user.vaults.map((vault, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    sx: {\n      '&:last-child td, &:last-child th': {\n        border: 0\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, vault._id), /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, vault.vault), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, vault.timelock), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, vault.funds), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, vault.autoRenew ? 'activado' : 'no activado'), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, vault.activated ? 'activa' : ' no activa'), !vault.activated ? /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: () => activateVault(vault === null || vault === void 0 ? void 0 : vault._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 64\n    }\n  }, \"Aceptar y activar\")) : null, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/editvault/${id}/${vault._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 42\n    }\n  }, \"Editar\")))))))));\n};\n\nexport default EditData;","map":{"version":3,"sources":["C:/Users/snmed/Desktop/guuru/guuru2/Guuru_main/frontend/src/components/pages/Private/EditData.jsx"],"names":["React","useState","useEffect","useParams","Link","VaultContext","Axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","EditData","id","user","setUser","saldo","setSaldo","endDate","setEndDate","useContext","today","Date","final","setDate","getDate","console","log","toString","traerUser","get","then","res","data","catch","err","saveUser","post","userId","_id","activateVault","vault","vaultId","displayName","email","e","target","value","minWidth","vaults","map","index","border","timelock","funds","autoRenew","activated"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useParams, Link } from 'react-router-dom'\r\nimport { VaultContext } from \"../../../context/vaultContext\";\r\nimport Axios from 'axios';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Button from '@mui/material/Button';\r\n\r\nconst EditData = () => {\r\n  const { id } = useParams();\r\n  const [user, setUser] = useState([]);\r\n  const [saldo, setSaldo] = useState();\r\n  const { endDate, setEndDate } = useContext(VaultContext);\r\n\r\n\r\n  var today = new Date();\r\n  var final = new Date(new Date().setDate(today.getDate() + 30));\r\n  console.log(final.toString())\r\n\r\n  function traerUser (user){\r\n    Axios.get(`/users/api/edit/${id}`)\r\n            .then(res => {\r\n              setUser(user => res.data)\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n            })\r\n  }\r\n  useEffect(() => {\r\n    traerUser();\r\n    setEndDate(final.toString())\r\n  }, []);\r\n\r\n  const saveUser = () => {\r\n    Axios.post(`/users/api/edit/${id}`, {\r\n      saldo: saldo,\r\n      userId : user._id,\r\n      \r\n    })\r\n      .then(res => {\r\n        console.log(res)\r\n        console.log(saldo)\r\n      }\r\n      ).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  const activateVault = (vault, final) => {\r\n    \r\n    Axios.post(`/users/api/activate/${id}/${vault}`, {\r\n      \r\n      userId: user._id,\r\n      vaultId: vault,\r\n      endDate: final\r\n    })\r\n      .then(res => {\r\n        console.log(res)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n      //window.location.reload();\r\n  }\r\n\r\n  console.log(user);\r\n\r\n  return (\r\n    <>\r\n      <h1>Editar usuario</h1>\r\n      <form>\r\n      <label>Nombre del usuario: </label>\r\n      <input type=\"text\" defaultValue={user.displayName}/>\r\n      <br/>\r\n      <label>Email: </label>\r\n      <input type=\"text\" defaultValue={user?.email}/>\r\n      <br/>\r\n      <label>Saldo disponible: </label>\r\n      <input type=\"text\" defaultValue={user.saldo} onChange={e => setSaldo(e.target.value)}/>\r\n      <br/>\r\n      <label>ID del usuario: </label>\r\n      <input type=\"text\" defaultValue={user._id}/>\r\n      <br/>\r\n      <button onClick={saveUser}>Editar datos</button>\r\n        <TableContainer >\r\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n            <TableCell >ID</TableCell>\r\n              <TableCell>Vault</TableCell>\r\n              <TableCell align=\"right\">Timelock</TableCell>\r\n              <TableCell align=\"right\">Invertido</TableCell>\r\n              <TableCell align=\"right\">Auto Renovar</TableCell>\r\n              <TableCell align=\"right\">Estado</TableCell>\r\n              <TableCell align=\"right\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {user?.vaults && user.vaults.map((vault, index) => (\r\n              <TableRow\r\n                key={index}\r\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n              >\r\n                <TableCell align=\"right\">{vault._id}</TableCell>\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  {vault.vault}\r\n                </TableCell>\r\n                <TableCell align=\"right\">{vault.timelock}</TableCell>\r\n                <TableCell align=\"right\">{vault.funds}</TableCell>\r\n                <TableCell align=\"right\">{(vault.autoRenew) ? 'activado' : 'no activado'}</TableCell>\r\n                <TableCell align=\"right\">{(vault.activated) ? 'activa' : ' no activa'}</TableCell>\r\n                {(!vault.activated) ? <TableCell align=\"right\"><Button variant=\"contained\" onClick={() => activateVault(vault?._id)}>Aceptar y activar</Button></TableCell> : null}\r\n                <TableCell align=\"right\"><Link to={`/editvault/${id}/${vault._id}`}>Editar</Link></TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    \r\n      </form>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EditData"]},"metadata":{},"sourceType":"module"}